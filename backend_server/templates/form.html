<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Form</title>
  </head>
  <body>
    <h1>Get request</h1>
    <p>Please enter the text you wish to submit:</p>
    <form>
        <textarea id=input_text></textarea>
    </form>
    <button id=button onclick="button()">Press Me</button>

    <script>
    function button() {
        const inputText = document.getElementById("input_text").value;
        postData('/api/job', {text:inputText});
    }

    async function postData(url = '', data = {}) {
        // Default options are marked with *
        try {
            const response = await fetch(url, {
                method: 'POST', // *GET, POST, PUT, DELETE, etc.
                credentials: 'include', // include, *same-origin, omit
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data) // body data type must match "Content-Type" header
            });
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
        } catch(err) {
            alert("Could not submit a request")
            return;
        }
        alert("Everything worked.")
        return response.json(); // parses JSON response into native JavaScript objects
    }
    </script>
  </body>
</html>